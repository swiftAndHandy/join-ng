<div class="person-selector">
  <input
    class="dropdown"
    type="text"
    [ngClass]="{ '--opened': isFocused }"
    (focus)="setFocus(true)"
    [value]="searchTerm()"
    (input)="inputSignal.updateInputElement($event, searchTerm)"
    name="person-selector"
  />
  <ul class="person-list" [ngClass]="{ '--focused': isFocused }">
    @for(person of taskService.assigned(); track $index) {
      @if (person.filtered) {
        <li>
          <button [attr.aria-label]="ariaForSelectedPersons(person)" [ngClass]="{'--selected': person.selected}" class="person-row" (click)="toggleAssignedPerson(person.id)">
            <div class="person__name-set" [attr.aria-hidden]="true">
              <div class="person-avatar" [ngStyle]="{'background-color': person.badge_color}">{{taskService.contacts.initials(person)}}</div>
              <div class="person-details">{{ person['first_name'] }} {{ person['surname']}}</div>
            </div>
            <div class="person-checkbox"></div>
          </button>
        </li>
      }
    }
  </ul>
</div>
<selected-users (click)="setFocus(false)"></selected-users>
